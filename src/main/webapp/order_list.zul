<?taglib uri="/WEB-INF/tld/helper.tld" prefix="r"?>
<window id="win_order_list" title="Lista de Pedidos" closable="false" apply="ar.edu.utn.sigmaproject.controller.OrderListController" sclass="sigma-content">
	<panel border="none">
        <panelchildren>
		    <hlayout>
		        <label>Buscar:</label>
		        <textbox id="searchTextbox" forward="onOK=searchButton.onClick"/>
		        <button id="searchButton" label="Buscar"/>
		        <hbox pack="center" align="center" hflex="1">
		        	<button id="newOrderButton" label="Nuevo Pedido"/>
		        </hbox>
		    </hlayout>
		    <separator/>
		    <grid id="orderGrid" mold="paging" pageSize="7">
		    	<auxhead>
					<auxheader label="Pedidos" colspan="10"/>
				</auxhead>
		        <columns>
		            <column label="Numero" align="center" sort="auto(number)"/>
		            <column label="Cliente" align="center" sort="auto(client.name)"/>
		            <column label="Fecha Creacion" align="center"/>
		            <column label="Fecha Necesidad" align="center"/>
		            <column label="Cant. Productos" align="center"/>
		            <column label="Estado" align="center" sort="auto(currentStateType.name)"/>
		            <column label="Importe Total" align="center"/>
		            <column label="Editar" width="120px" align="center"/>
		            <column label="Cancelar" width="120px" align="center"/>
		            <column label="Accion" align="center"/>
		        </columns>
		        <template name="model">
		            <row>
		                <label value="${each.getNumber()}"/>
		                <label value="${each.getClient().getName()}"/>
		                <label value="${r:getFormattedDate(each.getDate())}"/>
		                <label value="${r:getFormattedDate(each.getNeedDate())}"/>
		                <label value="${each.getDetails().size()}"/>
		                <label value="${each.getCurrentStateType().getName()}"/>
		                <label value="${win_order_list$composer.totalPrice(each)} $"/>
		                <button forward="onClick=orderGrid.onEditOrder(${each})"  image="/img/edit16x16.png"/>
		                <button disabled="${win_order_list$composer.isStateCancel(each) or win_order_list$composer.isStateDelivered(each)}" forward="onClick=orderGrid.onCancelOrder(${each})"  image="/img/delete16x16.png"/>
		                <button disabled="${win_order_list$composer.isStateCancel(each) or win_order_list$composer.isStateNotFinished(each)}" label="Entregar" forward="onClick=orderGrid.onDeliverOrder(${each})"/>
		            </row>
		        </template>
		    </grid>
		    <separator/>
        </panelchildren>
    </panel>
</window>
